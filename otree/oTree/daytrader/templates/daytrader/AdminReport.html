{% load otree %}
{% block content %}
    <style>
        body {
            background: #41739D;
        }

        ._otree-content {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #timer {
            display: flex;
            justify-content: center;
        }

        #daytrader-admin-table {
            width: 50%;
        }

        #form {
            display: none;
        }

    </style>


    <embed src="{% static 'daytrader/test.png' %}" class="graph-image"/>

    <p class="report-description">Nedenunder kan du se en tabel der viser firmaernes tilstande og spillets forl√∏b</p>

    <table id="tableReport" class="table daytrader-table table-responsive">
        <tr id="removeLast" class="table-corners">
            <th class="daytrader-table-header border-corner-left"> firma</th>
            <th class="daytrader-table-header"> tilstand</th>
            {% for r in round_list %}
                <th class="daytrader-table-header right text-center" id="round_{{ r }}"> {{ r }} </th>
            {% endfor %}
        </tr>
        {% for navn, tilstand, valg in company %}
            <tr class="daytrader-table-row">
                <td class="daytrader-table-data"> {{ navn }} </td>
                <td class="daytrader-table-data admin-table-data">
                    <div class="admin-sack-button-container">
                        {% for state in tilstand %}
                            {% if state == 1 %}
                                <embed src="{% static 'daytrader/media/happy_face_daytrader.png' %}"
                                       class="company-face admin-table-face-{{ forloop.counter }}"/>
                            {% else %}
                                <embed src="{% static 'daytrader/media/sad_face_daytrader.png' %}"
                                       class="company-face admin-table-face-{{ forloop.counter }}"/>
                            {% endif %}
                        {% endfor %}
                    </div>

                </td>
                {% for state in valg %}
                    <td class="daytrader-table-data">
                        {% if state == 1 %}
                            <img src="{% static 'daytrader/media/happy_face_daytrader.png' %}" alt="happy face"
                                 class="company-face">
                        {% else %}
                            <img src="{% static 'daytrader/media/sad_face_daytrader.png' %}" alt="sad face"
                                 class="company-face">
                        {% endif %}
                    </td>
                {% endfor %}
            </tr>


        {% endfor %}
    </table>

{% endblock %}

<script>
    // Remove last table column if row exceeds 2 columns
    let rowLength = document.getElementById("removeLast");
    let rowCount = document.getElementsByTagName("th").length;
    let tableHeaders = document.getElementsByClassName("daytrader-table-header");

    if (rowCount > 2) {
        rowLength.deleteCell(-1);
    }

    for (let item = 0; item < tableHeaders.length; item++) {
        tableHeaders[tableHeaders.length - 1].style.borderRadius = "0 10px 10px 0";
    }
</script>